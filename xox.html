<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Cosmic XOX</title>
<style>
body{
margin:0;
background:black;
color:white;
font-family:Orbitron, sans-serif;
overflow:hidden;
text-align:center;
}

.hidden{display:none;}

#nameScreen{
position:absolute;
width:100%;
height:100vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:15px;
background:black;
z-index:5;
}

input{
padding:10px;
background:#111;
border:1px solid cyan;
color:white;
}

button{
padding:10px 20px;
background:black;
border:2px solid cyan;
color:cyan;
cursor:pointer;
transition:0.3s;
}

button:hover{
background:cyan;
color:black;
box-shadow:0 0 20px cyan;
}

#board{
display:grid;
grid-template-columns:repeat(3,120px);
grid-template-rows:repeat(3,120px);
gap:10px;
justify-content:center;
margin-top:120px;
}

.cell{
display:flex;
align-items:center;
justify-content:center;
font-size:50px;
background:#111;
border:2px solid cyan;
cursor:pointer;
transition:0.3s;
}

.cell:hover{
box-shadow:0 0 20px cyan;
}

#score{
position:absolute;
top:10px;
width:100%;
font-size:20px;
}

canvas{
position:absolute;
top:0;
left:0;
pointer-events:none;
}

#champion,#lose{
position:absolute;
width:100%;
height:100vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
background:black;
z-index:10;
}

.trophy{
font-size:80px;
animation:spin 3s linear infinite;
}

@keyframes spin{
0%{transform:rotateY(0deg);}
100%{transform:rotateY(360deg);}
}

.glitch{
animation:glitch 0.3s infinite;
}

@keyframes glitch{
0%{transform:translate(2px,0);}
50%{transform:translate(-2px,0);}
100%{transform:translate(2px,0);}
}
</style>
</head>
<body>

<div id="nameScreen">
<h1>Takƒ±m ƒ∞simleri</h1>
<input id="p1" placeholder="Takƒ±m 1">
<input id="p2" placeholder="Takƒ±m 2">
<button onclick="startGame()">Ba≈üla</button>
</div>

<div id="score" class="hidden"></div>
<div id="board" class="hidden"></div>

<div id="champion" class="hidden">
<h1 id="champText"></h1>
<div class="trophy">üèÜ</div>
<button onclick="restartGame()">Yeniden Ba≈üla</button>
</div>

<div id="lose" class="hidden">
<h1 id="loseText" class="glitch"></h1>
<button onclick="restartGame()">Tekrar Dene</button>
</div>

<canvas id="stars"></canvas>
<canvas id="fx"></canvas>

<script>
const boardDiv=document.getElementById("board");
const scoreDiv=document.getElementById("score");
const champ=document.getElementById("champion");
const lose=document.getElementById("lose");
const champText=document.getElementById("champText");
const loseText=document.getElementById("loseText");
const starsCanvas=document.getElementById("stars");
const fxCanvas=document.getElementById("fx");
const sctx=starsCanvas.getContext("2d");
const fctx=fxCanvas.getContext("2d");

starsCanvas.width=fxCanvas.width=window.innerWidth;
starsCanvas.height=fxCanvas.height=window.innerHeight;

let players={X:"",O:""};
let state=["","","","","","","","",""];
let current="X";
let active=false;
let scores={X:0,O:0};
let moveCount=0;

function startGame(){
players.X=document.getElementById("p1").value||"Takƒ±m 1";
players.O=document.getElementById("p2").value||"Takƒ±m 2";
document.getElementById("nameScreen").classList.add("hidden");
boardDiv.classList.remove("hidden");
scoreDiv.classList.remove("hidden");
active=true;
createBoard();
updateScore();
}

function createBoard(){
boardDiv.innerHTML="";
state=["","","","","","","","",""];
moveCount=0;
current="X";
for(let i=0;i<9;i++){
const cell=document.createElement("div");
cell.classList.add("cell");
cell.onclick=()=>move(i,cell);
boardDiv.appendChild(cell);
}
}

function move(i,cell){
if(!active||state[i])return;
state[i]=current;
cell.innerText=current;
moveCount++;
if(checkWin()){
scores[current]++;
updateScore();
if(scores[current]>=3){
finalSequence(current);
}else{
createBoard();
}
}else if(moveCount===9){
createBoard();
}else{
current=current==="X"?"O":"X";
}
}

function checkWin(){
const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
return wins.some(comb=>{
if(comb.every(i=>state[i]===current)){
galacticExplosion();
return true;
}
});
}

function updateScore(){
scoreDiv.innerText=`${players.X}: ${scores.X} | ${players.O}: ${scores.O}`;
}

function galacticExplosion(){
for(let i=0;i<50;i++){
fctx.beginPath();
fctx.arc(Math.random()*fxCanvas.width,Math.random()*fxCanvas.height,3,0,Math.PI*2);
fctx.fillStyle="white";
fctx.fill();
}
setTimeout(()=>fctx.clearRect(0,0,fxCanvas.width,fxCanvas.height),500);
}

function finalSequence(winner){
active=false;
setTimeout(()=>{
blackHoleEffect();
},500);
setTimeout(()=>{
champ.classList.remove("hidden");
champText.innerText="Galaksi ≈ûampiyonu: "+players[winner];
},2000);
}

function blackHoleEffect(){
let radius=10;
let interval=setInterval(()=>{
fctx.clearRect(0,0,fxCanvas.width,fxCanvas.height);
fctx.beginPath();
fctx.arc(window.innerWidth/2,window.innerHeight/2,radius,0,Math.PI*2);
fctx.fillStyle="purple";
fctx.fill();
radius+=10;
if(radius>300)clearInterval(interval);
},30);
}

function restartGame(){
champ.classList.add("hidden");
lose.classList.add("hidden");
scores={X:0,O:0};
active=true;
createBoard();
updateScore();
}

let stars=[];
for(let i=0;i<100;i++){
stars.push({x:Math.random()*starsCanvas.width,y:Math.random()*starsCanvas.height});
}

function animateStars(){
sctx.clearRect(0,0,starsCanvas.width,starsCanvas.height);
stars.forEach(star=>{
sctx.fillStyle="white";
sctx.fillRect(star.x,star.y,2,2);
});
requestAnimationFrame(animateStars);
}
animateStars();

window.addEventListener("mousemove",e=>{
stars.forEach(star=>{
star.x+=(e.clientX-star.x)*0.0005;
star.y+=(e.clientY-star.y)*0.0005;
});
});
</script>

</body>
</html>
