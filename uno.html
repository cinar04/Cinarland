<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>UNO Cinarland Edition</title>
<style>
body{
margin:0;
font-family:Arial;
background:radial-gradient(circle,#1e293b,#0f172a);
color:white;
text-align:center;
overflow:hidden;
}

/* GÄ°ZLÄ° DEV BUTTON */
#devBtn{
position:fixed;
top:0;
left:0;
width:60px;
height:60px;
opacity:0;
z-index:1000;
cursor:pointer;
}

/* DEV PANEL */
#devPanel{
position:fixed;
right:-320px;
top:0;
width:300px;
height:100vh;
background:#111827;
padding:20px;
transition:.4s;
z-index:900;
box-shadow:-5px 0 25px rgba(0,0,0,.8);
}
#devPanel.open{right:0;}

#devHeader{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

#closeDev{
cursor:pointer;
font-size:20px;
padding:5px 10px;
background:#1f2937;
border-radius:6px;
}
#closeDev:hover{background:#374151;}

#devPanel button{
width:100%;
margin:8px 0;
padding:8px;
border-radius:8px;
border:none;
cursor:pointer;
font-weight:bold;
}

#startScreen,#endScreen{
position:fixed;
inset:0;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
background:#0f172a;
z-index:200;
}

#game{display:none;height:100vh;position:relative;}

.card{
width:90px;height:140px;border-radius:20px;
display:flex;align-items:center;justify-content:center;
font-size:26px;font-weight:bold;
box-shadow:0 10px 20px rgba(0,0,0,.5);
cursor:pointer;transition:.3s;color:white;
}
.card:hover{transform:translateY(-20px) scale(1.1);}

.red{background:#e63946;}
.green{background:#2a9d8f;}
.blue{background:#457b9d;}
.yellow{background:#f4a261;color:black;}
.black{background:black;}

#playerHand{
position:absolute;bottom:20px;width:100%;
display:flex;justify-content:center;gap:8px;
flex-wrap:wrap;
}

#computerInfo{position:absolute;top:20px;width:100%;}
#pile{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);}
#drawBtn{position:absolute;top:60%;left:50%;transform:translateX(-50%);}

#unoBtn{
position:absolute;bottom:180px;left:50%;
transform:translateX(-50%);
background:red;color:white;font-size:22px;
display:none;
}

/* COLOR PICKER */
#colorPicker{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,.85);
justify-content:center;
align-items:center;
gap:25px;
z-index:600;
}
.colorBtn{
width:90px;height:90px;border-radius:50%;
cursor:pointer;transition:.3s;
}
.colorBtn:hover{transform:scale(1.2);}

/* CONFETTI */
.confetti{
position:absolute;width:10px;height:10px;
animation:fall linear forwards;
}
@keyframes fall{
0%{transform:translateY(-10px) rotate(0);}
100%{transform:translateY(100vh) rotate(720deg);}
}

/* CRACK */
#crackOverlay{
position:fixed;
inset:0;
pointer-events:none;
opacity:0;
z-index:800;
background:
repeating-linear-gradient(45deg,
rgba(255,255,255,0.9) 0px,
rgba(255,255,255,0.9) 2px,
transparent 2px,
transparent 40px),
repeating-linear-gradient(-45deg,
rgba(255,255,255,0.7) 0px,
rgba(255,255,255,0.7) 2px,
transparent 2px,
transparent 50px);
}

@keyframes crackAnim{
0%{opacity:0;transform:scale(1);}
50%{opacity:1;transform:scale(1.05);}
100%{opacity:1;transform:scale(1);}
}

.shake{animation:shake .4s;}
@keyframes shake{
0%{transform:translate(0,0);}
20%{transform:translate(-10px,5px);}
40%{transform:translate(10px,-5px);}
60%{transform:translate(-8px,4px);}
80%{transform:translate(8px,-4px);}
100%{transform:translate(0,0);}
}

button{
padding:10px 20px;
border-radius:10px;
border:none;
cursor:pointer;
margin-top:15px;
font-weight:bold;
}
</style>
</head>
<body>

<div id="devBtn" onclick="toggleDev()"></div>

<div id="devPanel">
<div id="devHeader">
<h3>âš™ Developer Panel</h3>
<div id="closeDev" onclick="closeDev()">âœ–</div>
</div>

<button onclick="setBotCards()">Bot Kart Ayarla</button>
<button onclick="givePlus4Card()">+4 Kart Ver</button>
<button onclick="forceWin()">Direkt Kazan</button>
<button onclick="forceLose()">Direkt Kaybet</button>
<button onclick="location.reload()">Yeniden BaÅŸlat</button>
<button onclick="closeGame()">Oyunu Kapat</button>
</div>

<div id="startScreen">
<h1>UNO Cinarland Edition</h1>
<input id="username" placeholder="KullanÄ±cÄ± AdÄ±n">
<button onclick="startGame()">BaÅŸla</button>
</div>

<div id="game">
<div id="computerInfo"></div>
<div id="pile"></div>
<button id="drawBtn" onclick="draw()">Kart Ã‡ek</button>
<button id="unoBtn" onclick="pressUNO()">UNO!</button>
<div id="playerHand"></div>
</div>

<div id="colorPicker">
<div class="colorBtn red" onclick="chooseColor('red')"></div>
<div class="colorBtn green" onclick="chooseColor('green')"></div>
<div class="colorBtn blue" onclick="chooseColor('blue')"></div>
<div class="colorBtn yellow" onclick="chooseColor('yellow')"></div>
</div>

<div id="endScreen" style="display:none;">
<h1 id="endTitle"></h1>
<button id="endBtn" onclick="location.reload()"></button>
</div>

<div id="crackOverlay"></div>

<script>
const colors=["red","green","blue","yellow"];
const specials=["+2","skip","reverse"];
let deck=[],player=[],computer=[],current=null;
let turn=true,name="";
let unoTimer=null,unoPressed=false;
let devUnlocked=false;

function createDeck(){
deck=[];
colors.forEach(c=>{
for(let i=0;i<=9;i++)deck.push({color:c,value:i});
specials.forEach(s=>deck.push({color:c,value:s}));
});
for(let i=0;i<4;i++){
deck.push({color:"black",value:"wild"});
deck.push({color:"black",value:"+4"});
}
deck.sort(()=>Math.random()-0.5);
}

function safeDraw(){
if(deck.length===0)createDeck();
return deck.pop();
}

function startGame(){
name=document.getElementById("username").value.trim();
if(!name)return;
document.getElementById("startScreen").style.display="none";
document.getElementById("game").style.display="block";
createDeck();
player=[];computer=[];
for(let i=0;i<7;i++){
player.push(safeDraw());
computer.push(safeDraw());
}
current=safeDraw();
render();
}

function render(){
document.getElementById("pile").innerHTML=
`<div class="card ${current.color}">${current.value}</div>`;
document.getElementById("computerInfo").innerText=
"Bilgisayar Kart: "+computer.length;

let hand=document.getElementById("playerHand");
hand.innerHTML="";
player.forEach((card,i)=>{
let div=document.createElement("div");
div.className="card "+card.color;
div.innerText=card.value;
div.onclick=()=>play(i);
hand.appendChild(div);
});
}

function valid(card){
return card.color===current.color||
card.value===current.value||
card.color==="black";
}

function play(i){
if(!turn)return;
let card=player[i];
if(!valid(card))return;
player.splice(i,1);
applyCard(card,"player");
checkUNO();
checkWin();
}

function applyCard(card,who){
current=card;

if(card.value==="+2"){
let target=who==="player"?computer:player;
target.push(safeDraw());
target.push(safeDraw());
}

if(card.value==="+4"){
let target=who==="player"?computer:player;
for(let i=0;i<4;i++)target.push(safeDraw());
if(who==="player"){
document.getElementById("colorPicker").style.display="flex";
return;
}else{
current.color=colors[Math.floor(Math.random()*4)];
}
}

if(card.value==="wild"){
if(who==="player"){
document.getElementById("colorPicker").style.display="flex";
return;
}else{
current.color=colors[Math.floor(Math.random()*4)];
}
}

turn=!turn;
render();
if(!turn)setTimeout(bot,800);
}

function chooseColor(color){
current.color=color;
document.getElementById("colorPicker").style.display="none";
turn=false;
render();
setTimeout(bot,800);
}

function bot(){
for(let i=0;i<computer.length;i++){
if(valid(computer[i])){
let card=computer.splice(i,1)[0];
applyCard(card,"computer");
checkWin();
return;
}
}
computer.push(safeDraw());
turn=true;
render();
}

function draw(){
if(!turn)return;
player.push(safeDraw());
render();
}

function checkUNO(){
if(player.length===1){
document.getElementById("unoBtn").style.display="block";
unoPressed=false;
clearTimeout(unoTimer);
unoTimer=setTimeout(()=>{
if(!unoPressed){
for(let i=0;i<4;i++)player.push(safeDraw());
render();
}
document.getElementById("unoBtn").style.display="none";
},4000);
}
}

function pressUNO(){
unoPressed=true;
document.getElementById("unoBtn").style.display="none";
clearTimeout(unoTimer);
}

function checkWin(){
if(player.length===0)showEnd(true);
if(computer.length===0)showEnd(false);
}

function showEnd(win){
if(win){
document.getElementById("endTitle").innerText=name+" EZDÄ° ðŸ˜Ž";
document.getElementById("endBtn").innerText="TEKRAR EZ";
confetti();
}else{
document.body.classList.add("shake");
let crack=document.getElementById("crackOverlay");
crack.style.animation="crackAnim .6s forwards";
document.getElementById("endTitle").innerText="Bilgisayar KazandÄ± ðŸ’€";
document.getElementById("endBtn").innerText="Ä°NTÄ°KAM AL";
}
document.getElementById("game").style.display="none";
document.getElementById("endScreen").style.display="flex";
}

function confetti(){
for(let i=0;i<120;i++){
let c=document.createElement("div");
c.className="confetti";
c.style.left=Math.random()*100+"vw";
c.style.background=`hsl(${Math.random()*360},100%,50%)`;
c.style.animationDuration=(2+Math.random()*2)+"s";
document.body.appendChild(c);
setTimeout(()=>c.remove(),4000);
}
}

/* DEV PANEL */
function toggleDev(){
if(devUnlocked){
document.getElementById("devPanel").classList.add("open");
return;
}
let pass=prompt("Åžifre?");
if(pass==="7784"){
devUnlocked=true;
document.getElementById("devPanel").classList.add("open");
}else{
alert("YanlÄ±ÅŸ ÅŸifre");
}
}

function closeDev(){
document.getElementById("devPanel").classList.remove("open");
}

function setBotCards(){
let n=prompt("Bot kaÃ§ kart olsun?");
n=parseInt(n);
if(!isNaN(n)){
computer=[];
for(let i=0;i<n;i++)computer.push(safeDraw());
render();
}
}

function givePlus4Card(){
player.push({color:"black",value:"+4"});
render();
}

function forceWin(){ player=[]; checkWin(); }
function forceLose(){ computer=[]; checkWin(); }

function closeGame(){
document.body.innerHTML="<h1 style='color:white;text-align:center;margin-top:40vh'>Oyun KapatÄ±ldÄ±</h1>";
}
</script>

</body>
</html>
